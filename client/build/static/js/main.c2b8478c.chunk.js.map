{"version":3,"sources":["components/Header.js","components/Footer.js","components/NotFound.js","components/StatCards.js","API.js","helpers/AnimationHelper.js","containers/Livemap.js","helpers/tripsRoutesRTL.js","helpers/tripsRoutesSTM.js","containers/Livetrips.js","containers/Liveroutes.js","containers/Historique.js","components/Routes.js","App.js","index.js"],"names":["Header","react_default","a","createElement","Fragment","id","className","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","style","color","react_router_dom","to","textDecoration","Footer","NotFound","StatCards","this","props","lastRefreshSTM","substr","onlineVehiclesSTM","plannedVehiclesSTM","routesSTM","lastRefreshSTL","onlineVehiclesSTL","plannedVehiclesSTL","routesSTL","lastRefreshRTL","onlineVehiclesRTL","plannedVehiclesRTL","routesRTL","Component","socket","io","connect","transports","getNewData","_x","_getNewData","apply","arguments","_callee","cb","regenerator_default","wrap","_context","prev","next","on","data","emit","stop","leave","_leave","_callee2","_context2","getTracesSTM","_getTracesSTM","_callee3","response","_context3","fetch","sent","abrupt","json","getStopsSTM","_x2","_getStopsSTM","_callee4","trip","_context4","method","headers","Content-Type","body","JSON","stringify","getTracesSTL","_getTracesSTL","_callee5","_context5","getStopsSTL","_x3","_getStopsSTL","_callee6","trace","_context6","getTracesRTL","_getTracesRTL","_callee7","_context7","getStopsRTL","_x4","_getStopsRTL","_callee8","_context8","getHistory","_getHistory","_callee9","_context9","require","Livemap","state","viewport","latitude","longitude","zoom","componentDidMount","map","tracesSTM","tracesSTL","tracesRTL","err","positions","vehSTM","filter","e","reseau","vehSTL","vehRTL","_this","setState","vehiclesSTM","vehiclesSTL","vehiclesRTL","timestampSTM","timestr","timestampSTL","timestampRTL","plannedTripsRTL","plannedTripsSTL","plannedTripsSTM","reactMap","getMap","handleOnLoad","rows","jsonb_build_object","componentWillUnmount","remove","emptyGeoJSON","features","addSource","addLayer","source","layout","text-field","String","fromCharCode","text-font","text-size","paint","text-color","line-join","line-cap","visibility","line-width","line-color","circle-radius","circle-color","mapIsLoaded","componentDidUpdate","prevProps","prevState","_this$state","vehRoutesSTM","uniqueRoutesSTM","vehRoutesSTL","uniqueRoutesSTL","vehRoutesRTL","uniqueRoutesRTL","getSource","setData","properties","route_id","Object","toConsumableArray","Set","_onViewportChange","_onHover","event","_event$srcEvent","srcEvent","offsetX","offsetY","hoveredFeatureSTM","find","f","layer","hoveredStopSTM","hoveredFeatureSTL","hoveredFeatureRTL","x","y","stopRequestSTM","stopsResponseSTM","parseStopsSTM","stopRequestRTL","stopsResponseRTL","parseStopsRTL","stopRequestSTL","stopsResponseSTL","parseStopsSTL","_onClick","_event$srcEvent2","clickedFeatureSTM","clickedFeatureSTL","clickedFeatureRTL","tripClickSTM","routeClickSTL","tripClickRTL","traceSTM","traceSTL","traceRTL","stopsSTM","stopsRTL","stopsSTL","trip_id","trips","some","route_short_name","t0","t1","ID","t2","_this$state2","tripHoverSTM","routeHoverSTL","tripHoverRTL","left","top","vehicle_id","timestamp","last_connection","_this2","components_StatCards","length","esm","assign","ref","width","height","mapStyle","onViewportChange","mapboxApiAccessToken","process","onHover","onClick","_renderTooltip","turf","calcGraphsTripsRTL","_x5","_calcGraphsTripsRTL","visibleChartTripsLiveUpdate","plannedTrips","stops","stopsCounter","keyID","forEach","tripIDS","push","tripmin","position","indexOf","tripStops","name","time","departure_time","stop_sequence","z","currentPositionFeature","geometry","coordinates","g","coordTrace","turfLine","lineString","pt","point","snapped","nearestPointOnLine","units","dist","Math","round","location","splice","keyid","graph","online","timemin","parseInt","timemax","es6","dataKey","hide","range","domain","content","_ref","active","payload","fill","stroke","line","shape","longestRoutesRTL","_x6","_longestRoutesRTL","uniqueKey","direction_id","stopcount","tripid","console","log","calcGraphsTripsSTM","_calcGraphsTripsSTM","stop_distances","stopsequence","moment","Livetrips","tripList","selectStops","selectSTM","selectSTL","selectRTL","keyIDRTL","keyIDSTM","sort","b","regenGraphRTL","regenGraphSTM","handleClickSTM","plannedTripsWithGraphs","handleClickRTL","visibleChartTrips","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_loop","_iterator","_step","visibleChartTripsUpdate","undefined","mark","value","tripID","Symbol","iterator","done","delegateYield","return","finish","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_loop2","_iterator2","_step2","_context10","addToTripList","tripListAdd","_context11","removeFromTripList","_callee10","tripListRemove","tripPosition","stopListRemove","_context12","handleTripClickRTL","_callee11","_context13","target","innerHTML","handleTripClickSTM","_callee12","_context14","textAlign","backgroundColor","disabled","key","startOf","seconds","format","cursor","colSpan","react_loading_default","Historique","history","allVehicles","parseAll","week","saturday","sunday","vehlen","weekday","date","CustomTooltip","_ref2","margin","right","bottom","tickFormatter","unixTime","ticks","yAxisId","label","angle","orientation","Routes","react_router","exact","path","component","Liveroutes","App","components_Header","components_Routes","components_Footer","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.c2b8478c.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst Header = () => (\n\n  <React.Fragment>\n\n    <div id=\"headnav\" className=\"container-fluid\">\n      <nav className=\"navbar navbar-expand-md\">\n        <p className=\"navbar-brand mb-0 h1 text-white\"><i className=\"fas fa-rss\"></i> busr</p>\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavAltMarkup\" aria-controls=\"navbarNavAltMarkup\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <i className=\"fas fa-bars\" style={{ color: '#FFFFFF' }}></i>\n        </button>\n        <div className=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\">\n          <div className=\"navbar-nav\">\n            <Link className=\"nav-item nav-link text-white\" to=\"/\" style={{ textDecoration: 'none', color: '#FFFFFF' }}>\n              Carte\n            </Link>\n            <Link className=\"nav-item nav-link text-white\" to=\"/historique\" style={{ textDecoration: 'none', color: '#FFFFFF' }}>\n              Historique\n            </Link>\n            <Link className=\"nav-item nav-link text-white\" to=\"/livetrips\" style={{ textDecoration: 'none', color: '#FFFFFF' }}>\n              Dparts\n            </Link>\n            {/*<Link className=\"nav-item nav-link text-white\" to=\"/liveroutes\" style={{ textDecoration: 'none', color: '#FFFFFF' }}>\n              Lignes\n            </Link>*/}\n            {/*<Link className=\"nav-item nav-link text-white\" to=\"/reseaux\" style={{ textDecoration: 'none', color: '#FFFFFF' }}>\n              Rseaux\n            </Link>*/}\n          </div>\n        </div>\n      </nav>\n    </div>\n\n  </React.Fragment>\n);\n\nexport default Header;","import React from 'react';\n\nconst Footer = () => (\n  <div className=\"container-fluid\">\n    <nav className=\"navbar sticky-bottom navbar-light bg-light\">\n      <span className=\"navbar-brand\">&copy; busr 2019</span>\n    </nav>\n  </div>\n);\n\nexport default Footer;","import React from 'react';\n\nconst NotFound = () => (\n    <div className=\"container-fluid\">\n        <div className=\"jumbotron\">\n            <div className=\"container\">\n                <h1 className=\"display-4\">Page introuvable...</h1>\n                <p className=\"lead\">La page recherche n'est pas disponible.</p>\n            </div>\n        </div>\n    </div>\n)\n\nexport default NotFound;","import React, { Component } from 'react';\n\nclass StatCards extends Component {\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Rseau :</div>\n              <div id='stat'>STM</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>API :</div>\n              <div id='stat'>gtfs-r</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Rafrachit  :</div>\n              <div id='stat'>{this.props.lastRefreshSTM.substr(0, 8)}</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Vhicules actifs / planifis :</div>\n              <div id='stat'>{this.props.onlineVehiclesSTM} / {this.props.plannedVehiclesSTM}</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Lignes en service :</div>\n              <div id='stat'>{this.props.routesSTM}</div>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Rseau :</div>\n              <div id='stat'>STL</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>API :</div>\n              <div id='stat'>nextbus</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Rafrachit  :</div>\n              <div id='stat'>{this.props.lastRefreshSTL.substr(0, 8)}</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Vhicules actifs / planifis :</div>\n              <div id='stat'>{this.props.onlineVehiclesSTL} / {this.props.plannedVehiclesSTL}</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Lignes en service :</div>\n              <div id='stat'>{this.props.routesSTL}</div>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Rseau :</div>\n              <div id='stat'>RTL</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>API :</div>\n              <div id='stat'>gtfs-r</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Rafrachit  :</div>\n              <div id='stat'>{this.props.lastRefreshRTL.substr(0, 8)}</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Vhicules actifs / planifis :</div>\n              <div id='stat'>{this.props.onlineVehiclesRTL} / {this.props.plannedVehiclesRTL}</div>\n            </div>\n            <div className=\"col-sm\" id=\"stat-card\">\n              <div id='nom-stat'>Lignes en service :</div>\n              <div id='stat'>{this.props.routesRTL}</div>\n            </div>\n          </div>\n        </div>\n      </React.Fragment >\n    );\n  }\n}\n\nexport default StatCards;","import io from \"socket.io-client\";\n\n//const API_URL = 'http://192.168.0.146:5000'\n\nconst socket = process.env.NODE_ENV === 'production' ?\n  io.connect('busr-mtl.herokuapp.com', { transports: ['websocket'] }) :\n  io.connect('http://localhost:5000', { transports: ['websocket'] })\n\n\n// Fonctions realtime\n\nexport async function getNewData(cb) {\n\n  // socket.on('message-client-connected', (message) => {\n  //   console.log(message)\n  // })\n\n  socket.on('refresh data', data => cb(null, data))\n\n  socket.emit('subscribeToTimer', 3000);\n\n}\n\n\nexport async function leave() {\n  socket.emit('leave')\n}\n\n\n// Donnes pour cartographie\n\nexport async function getTracesSTM() {\n  const response = await fetch('/api/traces_stm')\n  return response.json();\n};\n\nexport async function getStopsSTM(trip) {\n  const response = await fetch('/api/stops_stm', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ \"trip\": trip })\n  });\n  return response.json()\n}\n\n\nexport async function getTracesSTL() {\n  const response = await fetch('/api/traces_stl');\n  return response.json();\n};\n\nexport async function getStopsSTL(trace) {\n  const response = await fetch('/api/stops_stl', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ \"trace\": trace })\n  });\n  return response.json()\n}\n\n\nexport async function getTracesRTL() {\n  const response = await fetch('/api/traces_rtl');\n  return response.json();\n};\n\n\nexport async function getStopsRTL(trip) {\n  const response = await fetch('/api/stops_rtl', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ \"trip\": trip })\n  });\n  return response.json()\n}\n\n\n// Donnes pour graphiques\n\nexport async function getHistory() {\n  const response = await fetch('/api/allvehicles')\n  return response.json()\n};\n\n\n","const turf = require('@turf/turf');\n\nexport async function tripsToArcsRTL(pointsDepart, pointsArrivee, shapes) {\n\n  //POUR L'INSTANT, NE TIENT PAS COMPTE DES POINTS POUR LESQUELS ON AURAIT \n  //SEULEMENT LE DEPART OU SEULEMENT L'ARRIVEE\n\n  // Step 1 : put each active shape in shape array\n  //let emptyGeoJSON = { \"type\": \"FeatureCollection\", \"features\": [] }\n  let shapeArray = [];\n\n  const buildShapeArray = shapes ? pointsDepart.features.forEach((e) => {\n    if (pointsArrivee.features.filter((f) => {\n      return f.properties.trip_id === e.properties.trip_id\n    }).length > 0) {\n      shapeArray.push(shapes.features.filter((f) => {\n        return f.properties.trips.some((g) => {\n          return g === e.properties.trip_id\n        })\n      }))\n    } //else {\n    //shapeArray.push(emptyGeoJSON)\n    //}\n  }) : ''\n  //console.log(shapeArray);\n\n  // Step 2 : slice shapes between start and stop\n  let i = 0;\n  let start = [];\n  let stop = [];\n  let line = [];\n  let slicedShapes = [];\n\n  //console.log(shapeArray[1]);\n\n  shapeArray.forEach((e) => {\n    start = turf.point(pointsDepart.features[i].geometry.coordinates);\n    stop = turf.point(pointsArrivee.features[i].geometry.coordinates);\n    line = turf.lineString(e[0].geometry.coordinates);\n    slicedShapes.push(turf.lineSlice(start, stop, line));\n    i++;\n  })\n\n  //console.log(slicedShapes)\n\n  // Step 3 : calculate sliced shape distances \n  //CES DISTANCES PEUVENT ETRE UTILISEES POUR CALCULER LA VITESSE\n\n  i = 0;\n  let sliceDistances = [];\n  slicedShapes.forEach((e) => {\n    sliceDistances.push(turf.lineDistance(slicedShapes[i]));\n    i++;\n  })\n\n  //console.log(sliceDistances)\n\n  // Step 4 : break shapes into segments based on number of steps\n  // 5m / step\n\n  let arc = [];\n  let j = 0;\n\n  slicedShapes.forEach((e) => {\n    for (let i = 0; i < sliceDistances[j]; i += sliceDistances[j] / (sliceDistances[j] / 5)) {\n      let line = turf.lineString(slicedShapes[j].geometry.coordinates);\n      let segment = turf.along(line, i);\n      arc.push(segment.geometry.coordinates);\n    }\n    slicedShapes[j].geometry.coordinates = arc;\n    j++;\n  })\n\n  return slicedShapes;\n\n}\n\n\n// Fonction d'animation \n\nexport async function animate(map, pointsDepart, arcs, featureIdx, cntr) {\n  // Update point geometry to a new position based on counter denoting\n  // the index to access the arc.\n  if (cntr >= arcs[featureIdx].geometry.coordinates.length - 1) {\n    return;\n  }\n\n  pointsDepart[featureIdx].geometry.coordinates = pointsDepart[featureIdx].geometry.coordinates[cntr];\n\n\n  pointsDepart[featureIdx].properties.bearing = turf.bearing(\n    turf.point(arcs[featureIdx].geometry.coordinates[cntr >= arcs[featureIdx].geometry.coordinates.length ? cntr - 1 : cntr]),\n    turf.point(arcs[featureIdx].geometry.coordinates[cntr >= arcs[featureIdx].geometry.coordinates.length ? cntr : cntr + 1])\n  );\n\n  // Update the source with this new data.\n  map.getSource('vehiculesRTL').setData(pointsDepart);\n\n  // Request the next frame of animation so long the end has not been reached.\n  if (cntr < arcs[featureIdx].geometry.coordinates.length) {\n    requestAnimationFrame(function () { animate(featureIdx, cntr + 1); });\n  }\n\n}","import React, { Component } from 'react';\nimport MapGL from 'react-map-gl';\nimport StatCards from '../components/StatCards.js'\n\nimport {\n  getNewData, leave,\n  getTracesSTM, getTracesSTL, getTracesRTL,\n  getStopsSTM, getStopsRTL, getStopsSTL\n} from '../API.js'\n\nimport {\n  tripsToArcsRTL, animate\n} from '../helpers/AnimationHelper.js'\n\nclass Livemap extends Component {\n\n  state = {\n    viewport: {\n      latitude: 45.556827,\n      longitude: -73.662362,\n      zoom: 10\n    }\n  };\n\n  componentDidMount = async () => {\n\n    const getData = getNewData((err, positions) => {\n\n      const vehSTM = positions ? positions[0].filter((e) => {\n        return e.reseau === 'STM'\n      }) : ''\n\n      const vehSTL = positions ? positions[0].filter((e) => {\n        return e.reseau === 'STL'\n      }) : ''\n\n      const vehRTL = positions ? positions[0].filter((e) => {\n        return e.reseau === 'RTL'\n      }) : ''\n\n      this.setState({\n        vehiclesSTM: vehSTM[0].data,\n        vehiclesSTL: vehSTL[0].data,\n        vehiclesRTL: vehRTL[0].data,\n        timestampSTM: vehSTM[0].timestr,\n        timestampSTL: vehSTL[0].timestr,\n        timestampRTL: vehRTL[0].timestr,\n        plannedTripsRTL: positions ? positions[1] : '',\n        plannedTripsSTL: positions ? positions[2] : '',\n        plannedTripsSTM: positions ? positions[3] : ''\n      })\n\n    })\n\n    const map = this.reactMap.getMap();\n\n    //initialisation de la carte\n    this.handleOnLoad(map)\n\n    const tracesSTM = await getTracesSTM();\n    this.setState({\n      tracesSTM: tracesSTM.rows[0].jsonb_build_object\n    })\n\n    const tracesSTL = await getTracesSTL();\n    this.setState({\n      tracesSTL: tracesSTL.rows[0].jsonb_build_object\n    })\n\n    const tracesRTL = await getTracesRTL();\n    this.setState({\n      tracesRTL: tracesRTL.rows[0].jsonb_build_object\n    })\n\n\n  }\n\n\n  componentWillUnmount = async () => {\n    this.map.remove();\n    leave();\n  }\n\n\n  handleOnLoad = async (map) => {\n    let emptyGeoJSON = { \"type\": \"FeatureCollection\", \"features\": [] }\n\n    map.on('load', () => {\n\n      //mettre un geojson valide (mais vide) sur la carte a l'initialisation pour eviter que mapbox \n      //genere une erreur. comment c'est monte ici, la source 'vehicules' est chargee au moment\n      //ou la carte finit de charger. pour que la source soit valide, elle doit contenir au \n      //un geojson valide.\n\n      // Sources Vehicules\n      map.addSource(\n        \"vehiculesSTM\", {\n          \"type\": \"geojson\",\n          \"data\": emptyGeoJSON\n        }\n      );\n\n      map.addSource(\n        \"vehiculesSTL\", {\n          \"type\": \"geojson\",\n          \"data\": emptyGeoJSON\n        }\n      );\n\n      map.addSource(\n        \"vehiculesRTL\", {\n          \"type\": \"geojson\",\n          \"data\": emptyGeoJSON\n        }\n      );\n\n      // Sources Traces\n      map.addSource(\n        \"tracesSTM\", {\n          \"type\": \"geojson\",\n          \"data\": emptyGeoJSON\n        }\n      );\n\n      map.addSource(\n        \"tracesSTL\", {\n          \"type\": \"geojson\",\n          \"data\": emptyGeoJSON\n        }\n      );\n\n      map.addSource(\n        \"tracesRTL\", {\n          \"type\": \"geojson\",\n          \"data\": emptyGeoJSON\n        }\n      );\n\n      // Sources Stops\n      map.addSource(\n        \"stopsSTM\", {\n          \"type\": \"geojson\",\n          \"data\": emptyGeoJSON\n        }\n      );\n\n      map.addSource(\n        \"stopsRTL\", {\n          \"type\": \"geojson\",\n          \"data\": emptyGeoJSON\n        }\n      );\n\n      map.addSource(\n        \"stopsSTL\", {\n          \"type\": \"geojson\",\n          \"data\": emptyGeoJSON\n        }\n      );\n\n      // Sources shapes ANIM\n      map.addSource(\n        'routeAnimRTL', {\n          \"type\": \"geojson\",\n          \"data\": emptyGeoJSON\n        });\n\n      //ajout de la couche de vehicules (basee sur la source vehicules)\n      //pour les icones de bus, s'assurer de mettre le type symbol\n      //le code 0xF207 s'explique comme suit :\n      //0x caracteres a ajouter pour tous les icones\n      //F207 identifiant de l'icone bus de fontawesome\n      //la police FontAwesome doit avoir ete chargee dans une des couches du style de carte utilise\n      //voir mapboxstudio\n\n      // Couches vehicules\n      map.addLayer(\n        {\n          \"id\": \"position-vehicules-stm\",\n          \"type\": \"symbol\",\n          \"source\": \"vehiculesSTM\",\n          \"layout\": {\n            'text-field': String.fromCharCode(\"0xF207\"),\n            'text-font': ['Font Awesome 5 Free Solid'],\n            'text-size': 12\n          },\n          \"paint\": {\n            \"text-color\": \"#009DE0\"\n          }\n        }\n      );\n\n      map.addLayer(\n        {\n          \"id\": \"position-vehicules-stl\",\n          \"type\": \"symbol\",\n          \"source\": \"vehiculesSTL\",\n          \"layout\": {\n            'text-field': String.fromCharCode(\"0xF207\"),\n            'text-font': ['Font Awesome 5 Free Solid'],\n            'text-size': 12\n          },\n          \"paint\": {\n            \"text-color\": \"#82C341\"\n          }\n        }\n      );\n\n      map.addLayer(\n        {\n          \"id\": \"position-vehicules-rtl\",\n          \"type\": \"symbol\",\n          \"source\": \"vehiculesRTL\",\n          \"layout\": {\n            'text-field': String.fromCharCode(\"0xF207\"),\n            'text-font': ['Font Awesome 5 Free Solid'],\n            'text-size': 12\n          },\n          \"paint\": {\n            \"text-color\": \"#A93332\"\n          }\n        }\n      );\n\n      // Couches traces\n      map.addLayer({\n        \"id\": \"tracesSTM\",\n        \"type\": \"line\",\n        \"source\": \"tracesSTM\",\n        \"layout\": {\n          \"line-join\": \"round\",\n          \"line-cap\": \"round\",\n          \"visibility\": \"visible\"\n        },\n        \"paint\": {\n          \"line-width\": 2,\n          \"line-color\": \"#2380A5\"\n        }\n      });\n\n      map.addLayer({\n        \"id\": \"tracesSTL\",\n        \"type\": \"line\",\n        \"source\": \"tracesSTL\",\n        \"layout\": {\n          \"line-join\": \"round\",\n          \"line-cap\": \"round\",\n          \"visibility\": \"visible\"\n        },\n        \"paint\": {\n          \"line-width\": 2,\n          \"line-color\": \"#4A913C\"\n        }\n      });\n\n      map.addLayer({\n        \"id\": \"tracesRTL\",\n        \"type\": \"line\",\n        \"source\": \"tracesRTL\",\n        \"layout\": {\n          \"line-join\": \"round\",\n          \"line-cap\": \"round\",\n          \"visibility\": \"visible\"\n        },\n        \"paint\": {\n          \"line-width\": 2,\n          \"line-color\": \"#C47B85\"\n        }\n      });\n\n      // Couches Stops\n      map.addLayer(\n        {\n          \"id\": \"stopsSTM\",\n          \"type\": \"circle\",\n          \"source\": \"stopsSTM\",\n          \"paint\": {\n            \"circle-radius\": 3,\n            \"circle-color\": \"#009DE0\"\n          }\n        }\n      );\n\n      map.addLayer(\n        {\n          \"id\": \"stopsRTL\",\n          \"type\": \"circle\",\n          \"source\": \"stopsRTL\",\n          \"paint\": {\n            \"circle-radius\": 3,\n            \"circle-color\": \"#A93332\"\n          }\n        }\n      );\n\n      map.addLayer(\n        {\n          \"id\": \"stopsSTL\",\n          \"type\": \"circle\",\n          \"source\": \"stopsSTL\",\n          \"paint\": {\n            \"circle-radius\": 3,\n            \"circle-color\": \"#82C341\"\n          }\n        }\n      );\n\n      // Couches route ANIM\n\n      map.addLayer({\n        \"id\": \"routeAnimRTL\",\n        \"source\": \"routeAnimRTL\",\n        \"type\": \"line\",\n        \"paint\": {\n          \"line-width\": 0,\n          \"line-color\": \"#007cbf\"\n        }\n      });\n\n      this.setState({ mapIsLoaded: true });\n\n    })\n\n    this.map = map;\n  }\n\n\n  //rafraichir les donnees avec les nouvelles donnees recues de socketio\n  //au moment du update du component\n  componentDidUpdate = async (prevProps, prevState) => {\n    const { vehiclesSTM, vehiclesSTL, vehiclesRTL } = this.state;\n    const { mapIsLoaded } = this.state;\n\n    if (!mapIsLoaded) {\n      return;\n    }\n\n    // Gestion vehicules STM\n    if (vehiclesSTM !== prevState.vehiclesSTM) {\n      this.map.getSource(\"vehiculesSTM\").setData(vehiclesSTM);\n\n      const vehRoutesSTM = this.state.vehiclesSTM ? this.state.vehiclesSTM.features.map((e) => {\n        return e.properties.route_id\n      }) : ''\n\n      const uniqueRoutesSTM = [...new Set(vehRoutesSTM)]\n\n      this.setState({ routesSTM: uniqueRoutesSTM })\n\n    }\n\n    // Gestion vehicules STL\n    if (vehiclesSTL !== prevState.vehiclesSTL) {\n      this.map.getSource(\"vehiculesSTL\").setData(vehiclesSTL);\n\n      const vehRoutesSTL = this.state.vehiclesSTL ? this.state.vehiclesSTL.features.map((e) => {\n        return e.properties.route_id\n      }) : ''\n\n      const uniqueRoutesSTL = [...new Set(vehRoutesSTL)]\n\n      this.setState({ routesSTL: uniqueRoutesSTL })\n    }\n\n    // Gestion vehicules RTL\n    if (vehiclesRTL !== prevState.vehiclesRTL) {\n      this.map.getSource(\"vehiculesRTL\").setData(vehiclesRTL);\n\n      const vehRoutesRTL = this.state.vehiclesRTL ? this.state.vehiclesRTL.features.map((e) => {\n        return e.properties.route_id\n      }) : ''\n\n      const uniqueRoutesRTL = [...new Set(vehRoutesRTL)]\n\n      // Animation\n      // if (prevState.vehiclesRTL && this.state.vehiclesRTL) {\n      //   const arcsRTL = await tripsToArcsRTL(prevState.vehiclesRTL, this.state.vehiclesRTL, this.state.tracesRTL);\n\n      //   // console.log(arcsRTL)\n      //   // console.log(prevState.vehiclesRTL.features)\n\n      //   // let i = 0;\n      //   // prevState.vehiclesRTL.features.forEach((e) => {\n      //   //   animate(this.map, prevState.vehiclesRTL.features, arcsRTL, i, 0)\n      //   //   i++\n      //   // })\n\n      // }\n\n      this.setState({ routesRTL: uniqueRoutesRTL })\n\n    }\n\n    //console.log(this.state)\n\n  }\n\n\n\n  _onViewportChange = viewport => this.setState({ viewport });\n\n\n  _onHover = event => {\n    const { features, srcEvent: { offsetX, offsetY } } = event;\n\n    const hoveredFeatureSTM = features && features.find(f => f.layer.id === 'position-vehicules-stm');\n    const hoveredStopSTM = features && features.find(f => f.layer.id === 'stopsSTM');\n\n    const hoveredFeatureSTL = features && features.find(f => f.layer.id === 'position-vehicules-stl');\n\n    const hoveredFeatureRTL = features && features.find(f => f.layer.id === 'position-vehicules-rtl');\n\n    this.setState({\n      hoveredFeatureSTM,\n      hoveredStopSTM,\n      hoveredFeatureSTL,\n      hoveredFeatureRTL,\n      x: offsetX,\n      y: offsetY\n    });\n\n  };\n\n\n  stopRequestSTM = async (trip) => {\n    const stopsResponseSTM = await getStopsSTM(trip);\n    const parseStopsSTM = stopsResponseSTM.rows[0].jsonb_build_object\n    return parseStopsSTM\n  }\n\n  stopRequestRTL = async (trip) => {\n    const stopsResponseRTL = await getStopsRTL(trip);\n    const parseStopsRTL = stopsResponseRTL.rows[0].jsonb_build_object\n    return parseStopsRTL\n  }\n\n  stopRequestSTL = async (trace) => {\n    const stopsResponseSTL = await getStopsSTL(trace);\n    const parseStopsSTL = stopsResponseSTL.rows[0].jsonb_build_object\n    return parseStopsSTL\n  }\n\n\n  _onClick = async (event) => {\n\n    const { mapIsLoaded } = this.state;\n\n    let emptyGeoJSON = { \"type\": \"FeatureCollection\", \"features\": [] }\n\n    const { features, srcEvent: { offsetX, offsetY } } = event;\n    const clickedFeatureSTM = features && features.find(f => f.layer.id === 'position-vehicules-stm');\n    const clickedFeatureSTL = features && features.find(f => f.layer.id === 'position-vehicules-stl');\n    const clickedFeatureRTL = features && features.find(f => f.layer.id === 'position-vehicules-rtl');\n\n\n    // Identification du trip (stm, rtl) ou de la ligne (stl) cliqu\n    const tripClickSTM = clickedFeatureSTM ? clickedFeatureSTM.properties.trip_id : '';\n    const routeClickSTL = clickedFeatureSTL ? clickedFeatureSTL.properties.route_id : '';\n    const tripClickRTL = clickedFeatureRTL ? clickedFeatureRTL.properties.trip_id : '';\n\n\n    // Dtermination du shape  faire apparatre en fonction du trip ou de la ligne cliqu.\n    const traceSTM = this.state.tracesSTM ? this.state.tracesSTM.features.filter((e) => {\n      return e.properties.trips.some((f) => {\n        return f === tripClickSTM\n      })\n    }) : ''\n\n    const traceSTL = this.state.tracesSTL ? this.state.tracesSTL.features.filter((e) => {\n      return e.properties.route_short_name === routeClickSTL\n    }) : ''\n\n    const traceRTL = this.state.tracesRTL ? this.state.tracesRTL.features.filter((e) => {\n      return e.properties.trips.some((f) => {\n        return f === tripClickRTL\n      })\n    }) : ''\n\n\n    // Affichage de la trace\n    const clickTraceSTM = mapIsLoaded === true ? (tripClickSTM !== '' ? this.map.getSource(\"tracesSTM\").setData(traceSTM[0])\n      : this.map.getSource(\"tracesSTM\").setData(emptyGeoJSON))\n      : '';\n\n    const clickTraceSTL = mapIsLoaded === true ? (routeClickSTL !== '' ? this.map.getSource(\"tracesSTL\").setData(traceSTL[0])\n      : this.map.getSource(\"tracesSTL\").setData(emptyGeoJSON))\n      : '';\n\n    const clickTraceRTL = mapIsLoaded === true ? (tripClickRTL !== '' ? this.map.getSource(\"tracesRTL\").setData(traceRTL[0])\n      : this.map.getSource(\"tracesRTL\").setData(emptyGeoJSON))\n      : '';\n\n\n    //Requete pour obtenir les arrets a afficher selon le trip (ou la route)\n    const stopsSTM = tripClickSTM !== '' ? await this.stopRequestSTM(tripClickSTM) : '';\n    this.setState({ stopsSTM: stopsSTM })\n\n\n    const clickStopsSTM = mapIsLoaded === true ? (this.state.stopsSTM !== '' ? this.map.getSource(\"stopsSTM\").setData(this.state.stopsSTM)\n      : this.map.getSource(\"stopsSTM\").setData(emptyGeoJSON))\n      : '';\n\n    const stopsRTL = tripClickRTL !== '' ? await this.stopRequestRTL(tripClickRTL) : '';\n    this.setState({ stopsRTL: stopsRTL })\n\n\n    const clickStopsRTL = mapIsLoaded === true ? (this.state.stopsRTL !== '' ? this.map.getSource(\"stopsRTL\").setData(this.state.stopsRTL)\n      : this.map.getSource(\"stopsRTL\").setData(emptyGeoJSON))\n      : '';\n\n    const stopsSTL = routeClickSTL !== '' ? await this.stopRequestSTL(traceSTL[0].properties.ID) : '';\n    this.setState({ stopsSTL: stopsSTL })\n\n\n    const clickStopsSTL = mapIsLoaded === true ? (this.state.stopsSTL !== '' ? this.map.getSource(\"stopsSTL\").setData(this.state.stopsSTL)\n      : this.map.getSource(\"stopsSTL\").setData(emptyGeoJSON))\n      : '';\n\n\n    this.setState({\n      clickedFeatureSTM,\n      clickedFeatureSTL,\n      clickedFeatureRTL,\n      x: offsetX,\n      y: offsetY,\n    });\n\n  };\n\n\n  _renderTooltip() {\n\n    const {\n      hoveredFeatureSTM,\n      hoveredStopSTM,\n      hoveredFeatureSTL,\n      hoveredFeatureRTL,\n      x, y, mapIsLoaded } = this.state;\n\n\n\n    // Identification du trip (stm, rtl) ou de la ligne (stl) hovered\n    const tripHoverSTM = hoveredFeatureSTM ? hoveredFeatureSTM.properties.trip_id : '';\n    const routeHoverSTL = hoveredFeatureSTL ? hoveredFeatureSTL.properties.route_id : '';\n    const tripHoverRTL = hoveredFeatureRTL ? hoveredFeatureRTL.properties.trip_id : '';\n\n\n    //Affectation du nom du trip ou de la ligne  une variable \n    const nomLigneSTM = this.state.tracesSTM ? this.state.tracesSTM.features.filter((e) => {\n      return e.properties.trips.some((f) => {\n        return f === tripHoverSTM\n      })\n    }) : ''\n\n    const nomLigneSTL = this.state.tracesSTL ? this.state.tracesSTL.features.filter((e) => {\n      return e.properties === routeHoverSTL\n    }) : ''\n\n    const nomLigneRTL = this.state.tracesRTL ? this.state.tracesRTL.features.filter((e) => {\n      return e.properties.trips.some((f) => {\n        return f === tripHoverRTL\n      })\n    }) : ''\n\n\n\n    //AFFICHAGE DES TOOLTIP ON HOVER\n\n    return hoveredFeatureSTM ?\n      hoveredFeatureSTM && (\n        //ne pas appeler la class 'tooltip' car il semble que ce nom soit en conflit\n        //avec un autre tooltip...\n        <div className=\"mapToolTip\" style={{ left: x, top: y }}>\n          <div>No de vhicule: {hoveredFeatureSTM.properties.vehicle_id}</div>\n          <div>Ligne: {hoveredFeatureSTM.properties.route_id}</div>\n          {/*<div>Axe: {nomLigneSTM[0].properties.route_name ? nomLigneSTM[0].properties.route_name : ''}</div>*/}\n          <div>Trip: {hoveredFeatureSTM.properties.trip_id}</div>\n          <div>MAJ: {hoveredFeatureSTM.properties.timestamp ? hoveredFeatureSTM.properties.timestamp : ''} s</div>\n        </div>\n      ) :\n      hoveredFeatureSTL ?\n        hoveredFeatureSTL && (\n          <div className=\"mapToolTip\" style={{ left: x, top: y }}>\n            <div>No de vhicule: {hoveredFeatureSTL.properties.vehicle_id}</div>\n            <div>Ligne: {hoveredFeatureSTL.properties.route_id}</div>\n            <div>MAJ : {hoveredFeatureSTL.properties.last_connection} s</div>\n          </div>\n        ) :\n        hoveredFeatureRTL ?\n          hoveredFeatureRTL && (\n            <div className=\"mapToolTip\" style={{ left: x, top: y }}>\n              <div>No de vhicule: {hoveredFeatureRTL.properties.vehicle_id}</div>\n              <div>Ligne: {hoveredFeatureRTL.properties.route_id}</div>\n              {/*<div>Axe: {nomLigneRTL ? nomLigneRTL[0].properties.route_name : ''}</div>*/}\n              <div>Trip: {hoveredFeatureRTL.properties.trip_id}</div>\n              <div>MAJ: {hoveredFeatureRTL.properties.timestamp ? hoveredFeatureRTL.properties.timestamp : ''} s</div>\n            </div>\n          ) : ''\n    /*hoveredStopSTM ?\n      hoveredStopSTM && (\n        <div className=\"mapToolTip\" style={{ left: x, top: y }}>\n          <div>Passages :{this.hoveredStopSTM ? this.stopSTM.features.filter((e) => {\n            return e.id === parseInt(this.state.hoveredStopsSTM.id)\n          }).properties.departs.map((e) => { return e })\n            : ''}</div>\n        </div>\n      ) : ''*/\n\n  }\n\n\n  render() {\n\n    const { viewport } = this.state;\n\n    return <React.Fragment >\n      <div className=\"container-fluid\">\n        <StatCards\n          lastRefreshSTM={this.state.timestampSTM ? this.state.timestampSTM : '-'}\n          onlineVehiclesSTM={this.state.vehiclesSTM ? this.state.vehiclesSTM.features.length : 0}\n          plannedVehiclesSTM={this.state.plannedTripsSTM ? this.state.plannedTripsSTM.length : 0}\n          routesSTM={this.state.routesSTM ? this.state.routesSTM.length : 0}\n          lastRefreshSTL={this.state.timestampSTL ? this.state.timestampSTL : '-'}\n          onlineVehiclesSTL={this.state.vehiclesSTL ? this.state.vehiclesSTL.features.length : 0}\n          plannedVehiclesSTL={this.state.plannedTripsSTL ? this.state.plannedTripsSTL.length : 0}\n          routesSTL={this.state.routesSTL ? this.state.routesSTL.length : 0}\n          lastRefreshRTL={this.state.timestampRTL ? this.state.timestampRTL : '-'}\n          onlineVehiclesRTL={this.state.vehiclesRTL ? this.state.vehiclesRTL.features.length : 0}\n          plannedVehiclesRTL={this.state.plannedTripsRTL ? this.state.plannedTripsRTL.length : 0}\n          routesRTL={this.state.routesRTL ? this.state.routesRTL.length : 0}\n        />\n        <MapGL\n          {...viewport}\n          ref={(reactMap) => this.reactMap = reactMap}\n          width=\"100%\"\n          height=\"85vh\"\n          mapStyle=\"mapbox://styles/wdoucetk/cjun8whio1ha21fmzxt8knp7k\"\n          onViewportChange={this._onViewportChange}\n          mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_KEY}\n          onHover={this._onHover}\n          onClick={this._onClick}\n        >\n          {this._renderTooltip()}\n        </MapGL>\n      </div>\n    </React.Fragment >\n  }\n}\n\nexport default Livemap;\n\n//mapbox://styles/wdoucetk/cjun8whio1ha21fmzxt8knp7k light\n//mapbox://styles/wdoucetk/cjuc6i3960ggz1flfzzn3upav navigation","import React from 'react';\n\nimport {\n  ResponsiveContainer,\n  ScatterChart, Scatter, XAxis, YAxis, ZAxis, Tooltip\n} from 'recharts';\n\nconst turf = require('@turf/turf');\n\nexport async function calcGraphsTripsRTL(\n  visibleChartTripsLiveUpdate,\n  plannedTrips,\n  stops,\n  vehiclesRTL,\n  tracesRTL\n) {\n\n  let stopsCounter = 0;\n\n  visibleChartTripsLiveUpdate.forEach((e) => {\n\n    //Trouver la position du trip dans l'array\n    let tripIDS = [];\n    plannedTrips.map((f) => {\n      tripIDS.push(f.tripmin)\n    })\n\n    let position = tripIDS.indexOf(e)\n\n    //Trouver les arrts correspondants au trip\n    let stopsRTL = stops[stopsCounter].tripStops;\n    stopsCounter++;\n\n    //Prparer les donnes pour le graph\n    let data = [];\n    stopsRTL.features.map((f) => {\n      data.push({\n        name: f.properties.name,\n        time: f.properties.departure_time,\n        x: f.properties.stop_sequence,\n        y: 0,\n        z: 15\n      })\n    })\n\n    //Trouver les coordonnees actuelles du bus sur le trip\n    const currentPositionFeature = vehiclesRTL.features.filter((f) => {\n      return f.properties.trip_id === e\n    })[0].geometry.coordinates;\n\n    //Trouver la trace correspondant au trip\n    const traceRTL = tracesRTL.features.filter((f) => {\n      return f.properties.trips.some((g) => {\n        return g === e\n      })\n    })\n\n    //Trouver la distance parcourue par le bus sur le trip\n    const coordTrace = [];\n\n    traceRTL[0].geometry.coordinates.map((f) => {\n      coordTrace.push(f)\n    })\n\n    let turfLine = turf.lineString(coordTrace);\n    let pt = turf.point(currentPositionFeature);\n    let snapped = turf.nearestPointOnLine(turfLine, pt, { units: 'kilometers' });\n    let dist = [{ x: Math.round((snapped.properties.location) * 1000), y: 0, z: 60 }]\n\n    // Tooltip custom\n    const CustomTooltip = ({ active, payload }) => {\n      if (active) {\n        return (\n          <div className=\"custom-tooltip\">\n            <p className=\"label\">{payload[0].payload.name}<br />\n              Distance : {payload[0].payload.x}<br />\n              Planifi : {payload[0].payload.time}</p>\n          </div>\n        );\n      }\n      return null;\n    };\n\n    plannedTrips.splice(position + 1, 0, {\n      keyid: position + 1,\n      graph: 1,\n      online: plannedTrips[position].online,\n      timemin: parseInt(plannedTrips[position].timemin),\n      timemax: plannedTrips[position].timemax,\n      tripmin:\n        <ResponsiveContainer width=\"95%\" height={50} >\n          <ScatterChart>\n            <XAxis type=\"number\" dataKey=\"x\" hide />\n            <YAxis type=\"number\" dataKey=\"y\" hide />\n            <ZAxis type=\"number\" dataKey=\"z\" range={[10, 100]} domain={[15, 75]} />\n            <Tooltip\n              content={<CustomTooltip />}\n            />\n            <Scatter name=\"Arrets\" data={data} fill=\"#000000\" stroke=\"#5B5B5B\" line shape=\"circle\" />\n            <Scatter name=\"Bus\" data={dist} fill=\"#A93332\" line shape=\"circle\" />\n          </ScatterChart>\n        </ResponsiveContainer >\n\n    })\n\n  })\n\n  //Affecter une cle unique correspondant a la position dans l'array\n  let keyID = 0;\n  plannedTrips.forEach((e) => {\n    e.keyid = keyID;\n    keyID++;\n  })\n\n  return plannedTrips\n\n}\n\nexport async function longestRoutesRTL(plannedTripsRTL) {\n\n  let uniqueKey = [];\n  plannedTripsRTL.map((e) => {\n    uniqueKey.push({\n      route_id: e.route_id,\n      direction_id: e.direction_id,\n      uniqueKey: e.route_id + '_' + e.direction_id,\n      stopcount: e.stopcount,\n      tripid: e.tripmin\n    })\n  })\n\n  console.log(uniqueKey)\n}\n\n\n\nexport async function calcGraphsRoutesRTL(\n  visibleChartTripsLiveUpdate,\n  plannedTrips,\n  stops,\n  vehiclesRTL,\n  tracesRTL\n) {\n\n  let stopsCounter = 0;\n\n  visibleChartTripsLiveUpdate.forEach((e) => {\n\n    //Trouver la position du trip dans l'array\n    let tripIDS = [];\n    plannedTrips.map((f) => {\n      tripIDS.push(f.tripmin)\n    })\n\n    let position = tripIDS.indexOf(e)\n\n    //Trouver les arrts correspondants au trip\n    let stopsRTL = stops[stopsCounter].tripStops;\n    stopsCounter++;\n\n    //Prparer les donnes pour le graph\n    let data = [];\n    stopsRTL.features.map((f) => {\n      data.push({\n        name: f.properties.name,\n        time: f.properties.departure_time,\n        x: f.properties.stop_sequence,\n        y: 0,\n        z: 15\n      })\n    })\n\n    //Trouver les coordonnees actuelles du bus sur le trip\n    const currentPositionFeature = vehiclesRTL.features.filter((f) => {\n      return f.properties.trip_id === e\n    })[0].geometry.coordinates;\n\n    //Trouver la trace correspondant au trip\n    const traceRTL = tracesRTL.features.filter((f) => {\n      return f.properties.trips.some((g) => {\n        return g === e\n      })\n    })\n\n    //Trouver la distance parcourue par le bus sur le trip\n    const coordTrace = [];\n\n    traceRTL[0].geometry.coordinates.map((f) => {\n      coordTrace.push(f)\n    })\n\n    let turfLine = turf.lineString(coordTrace);\n    let pt = turf.point(currentPositionFeature);\n    let snapped = turf.nearestPointOnLine(turfLine, pt, { units: 'kilometers' });\n    let dist = [{ x: Math.round((snapped.properties.location) * 1000), y: 0, z: 60 }]\n\n    // Tooltip custom\n    const CustomTooltip = ({ active, payload }) => {\n      if (active) {\n        return (\n          <div className=\"custom-tooltip\">\n            <p className=\"label\">{payload[0].payload.name}<br />\n              Distance : {payload[0].payload.x}<br />\n              Planifi : {payload[0].payload.time}</p>\n          </div>\n        );\n      }\n      return null;\n    };\n\n    plannedTrips.splice(position + 1, 0, {\n      keyid: position + 1,\n      graph: 1,\n      online: plannedTrips[position].online,\n      timemin: parseInt(plannedTrips[position].timemin),\n      timemax: plannedTrips[position].timemax,\n      tripmin:\n        <ResponsiveContainer width=\"95%\" height={50} >\n          <ScatterChart>\n            <XAxis type=\"number\" dataKey=\"x\" hide />\n            <YAxis type=\"number\" dataKey=\"y\" hide />\n            <ZAxis type=\"number\" dataKey=\"z\" range={[10, 100]} domain={[15, 75]} />\n            <Tooltip\n              content={<CustomTooltip />}\n            />\n            <Scatter name=\"Arrets\" data={data} fill=\"#000000\" stroke=\"#5B5B5B\" line shape=\"circle\" />\n            <Scatter name=\"Bus\" data={dist} fill=\"#A93332\" line shape=\"circle\" />\n          </ScatterChart>\n        </ResponsiveContainer >\n\n    })\n\n  })\n\n  //Affecter une cle unique correspondant a la position dans l'array\n  let keyID = 0;\n  plannedTrips.forEach((e) => {\n    e.keyid = keyID;\n    keyID++;\n  })\n\n  return plannedTrips\n\n}\n\n","import React from 'react';\n\nimport {\n  ResponsiveContainer,\n  ScatterChart, Scatter, XAxis, YAxis, ZAxis, Tooltip\n} from 'recharts';\n\nconst turf = require('@turf/turf');\n\nexport async function calcGraphsTripsSTM(\n  visibleChartTripsLiveUpdate,\n  plannedTrips,\n  stops,\n  vehiclesSTM,\n  tracesSTM\n) {\n\n  let stopsCounter = 0;\n\n  visibleChartTripsLiveUpdate.forEach((e) => {\n\n    //Trouver la position du trip dans l'array\n    let tripIDS = [];\n    plannedTrips.map((f) => {\n      tripIDS.push(f.tripmin)\n    })\n\n    let position = tripIDS.indexOf(e)\n\n    //Trouver les arrts correspondants au trip\n    let stopsSTM = stops[stopsCounter].tripStops;\n    stopsCounter++;\n\n    // Prparer les donnes pour le graph\n\n    // Etape supplementaire par rapport au RTL :\n\n    // La STM ne met pas les distances parcourues dans stop_sequence\n    // Il faut calculer la distance parcourue a chaque stop sur le trip avec turf\n\n    //Trouver la trace correspondant au trip\n    const traceSTM = tracesSTM.features.filter((f) => {\n      return f.properties.trips.some((g) => {\n        return g === e\n      })\n    })\n\n    const coordTrace = [];\n\n    traceSTM[0].geometry.coordinates.map((f) => {\n      coordTrace.push(f)\n    })\n\n    let turfLine = turf.lineString(coordTrace);\n\n    let stop_distances = [];\n\n    stopsSTM.features.forEach((f) => {\n      let pt = turf.point(f.geometry.coordinates);\n      let snapped = turf.nearestPointOnLine(turfLine, pt, { units: 'kilometers' });\n      let dist = Math.round((snapped.properties.location) * 1000);\n      stop_distances.push(dist)\n    })\n\n\n    let data = [];\n    let stopsequence = 0;\n    stopsSTM.features.map((f) => {\n      data.push({\n        name: f.properties.name,\n        time: f.properties.departure_time,\n        x: stop_distances[stopsequence],\n        y: 0,\n        z: 15\n      })\n      stopsequence++;\n    })\n\n    //Trouver les coordonnees actuelles du bus sur le trip\n    const currentPositionFeature = vehiclesSTM.features.filter((f) => {\n      return f.properties.trip_id === e\n    })[0].geometry.coordinates;\n\n\n    //Trouver la distance parcourue par le bus sur le trip\n    let pt = turf.point(currentPositionFeature);\n    let snapped = turf.nearestPointOnLine(turfLine, pt, { units: 'kilometers' });\n    let dist = [{ x: Math.round((snapped.properties.location) * 1000), y: 0, z: 60 }]\n\n    // Tooltip custom\n    const CustomTooltip = ({ active, payload }) => {\n      if (active) {\n        return (\n          <div className=\"custom-tooltip\">\n            <p className=\"label\">{payload[0].payload.name}<br />\n              Distance : {payload[0].payload.x}<br />\n              Planifi : {payload[0].payload.time}</p>\n          </div>\n        );\n      }\n      return null;\n    };\n\n\n    plannedTrips.splice(position + 1, 0, {\n      keyid: position + 1,\n      graph: 1,\n      online: plannedTrips[position].online,\n      timemin: parseInt(plannedTrips[position].timemin),\n      timemax: plannedTrips[position].timemax,\n      tripmin:\n        <ResponsiveContainer width=\"95%\" height={50} >\n          <ScatterChart>\n            <XAxis type=\"number\" dataKey=\"x\" hide />\n            <YAxis type=\"number\" dataKey=\"y\" hide />\n            <ZAxis type=\"number\" dataKey=\"z\" range={[10, 100]} domain={[15, 75]} />\n            <Tooltip\n              content={<CustomTooltip />}\n            />\n            <Scatter name=\"Arrets\" data={data} fill=\"#000000\" stroke=\"#5B5B5B\" line shape=\"circle\" />\n            <Scatter name=\"Bus\" data={dist} fill=\"#A93332\" line shape=\"circle\" />\n          </ScatterChart>\n        </ResponsiveContainer >\n\n    })\n\n  })\n\n\n\n  //Affecter une cle unique correspondant a la position dans l'array\n  let keyID = 0;\n  plannedTrips.forEach((e) => {\n    e.keyid = keyID;\n    keyID++;\n  })\n\n  return plannedTrips\n\n}","import React, { Component } from 'react';\nimport ReactLoading from 'react-loading';\n\nimport {\n  getNewData, leave,\n  getTracesSTM, getTracesSTL, getTracesRTL,\n  getStopsSTM, getStopsRTL, getStopsSTL\n} from '../API.js';\n\nimport { calcGraphsTripsRTL } from '../helpers/tripsRoutesRTL.js';\nimport { calcGraphsTripsSTM } from '../helpers/tripsRoutesSTM.js';\n\n\nconst moment = require('moment');\n\nclass Livetrips extends Component {\n\n  state = {\n    tripList: [],\n    selectStops: [],\n    selectSTM: 0,\n    selectSTL: 0,\n    selectRTL: 0,\n  };\n\n  componentDidMount = async () => {\n\n    const getData = getNewData((err, positions) => {\n\n      // Split data by network\n\n      const vehSTM = positions ? positions[0].filter((e) => {\n        return e.reseau === 'STM'\n      }) : ''\n\n      const vehSTL = positions ? positions[0].filter((e) => {\n        return e.reseau === 'STL'\n      }) : ''\n\n      const vehRTL = positions ? positions[0].filter((e) => {\n        return e.reseau === 'RTL'\n      }) : ''\n\n      // Add 'online' property when planned trip matches live data\n      // Allows to color trip with green/red depending on property\n\n      let keyIDRTL = 0;\n      const checkOnlineRTL = positions[1].forEach((e) => {\n        e.keyid = keyIDRTL;\n        keyIDRTL++;\n        if (vehRTL[0].data.features.filter((f) => {\n          return f.properties.trip_id === e.tripmin\n        }).length > 0) {\n          e.online = 1\n        } else {\n          e.online = 0\n        }\n      })\n\n      // No trip ID in STL data\n      // To Do : find a way to match live trips to planned gtfs data\n\n      let keyIDSTM = 0;\n      const checkOnlineSTM = positions[3].forEach((e) => {\n        e.keyid = keyIDSTM;\n        keyIDSTM++;\n        if (vehSTM[0].data.features.filter((f) => {\n          return f.properties.trip_id === e.tripmin\n        }).length > 0) {\n          e.online = 1\n        } else {\n          e.online = 0\n        }\n      })\n\n\n      this.setState({\n        vehiclesSTM: positions ? vehSTM[0].data : '',\n        vehiclesSTL: positions ? vehSTL[0].data : '',\n        vehiclesRTL: positions ? vehRTL[0].data : '',\n        timestampSTM: positions ? vehSTM[0].time : '',\n        timestampSTL: positions ? vehSTL[0].time : '',\n        timestampRTL: positions ? vehSTL[0].time : '',\n        plannedTripsRTL: positions ? positions[1] : '',\n        plannedTripsSTL: positions ? positions[2].sort((a, b) => (a.timemin > b.timemin) ? 1 : -1) : '',\n        plannedTripsSTM: positions ? positions[3] : ''\n      })\n\n      //plannedTripsRTL: positions ? positions[1].sort((a, b) => (a.timemin > b.timemin) ? 1 : -1) : ''\n\n    })\n\n\n    const tracesRTL = await getTracesRTL();\n    this.setState({\n      tracesRTL: tracesRTL.rows[0].jsonb_build_object\n    })\n\n    const tracesSTM = await getTracesSTM();\n    this.setState({\n      tracesSTM: tracesSTM.rows[0].jsonb_build_object\n    })\n\n\n    if (this.state.selectRTL === 1 && this.state.plannedTripsRTL) {\n      this.regenGraphRTL();\n    }\n\n    if (this.state.selectSTM === 1 && this.state.plannedTripsSTM) {\n      this.regenGraphSTM();\n    }\n\n  }\n\n\n  componentDidUpdate(prevProps, prevState) {\n\n    const { tripList, plannedTripsRTL, plannedTripsSTM, selectRTL, selectSTM } = this.state;\n\n\n    if (selectRTL === 1 && plannedTripsRTL !== prevState.plannedTripsRTL) {\n      this.regenGraphRTL();\n    }\n\n    if (selectRTL === 1 && tripList.length !== prevState.tripList.length) {\n      this.regenGraphRTL();\n    }\n\n\n    if (selectSTM === 1 && plannedTripsSTM !== prevState.plannedTripsSTM) {\n      this.regenGraphSTM();\n    }\n\n    if (selectSTM === 1 && tripList.length !== prevState.tripList.length) {\n      this.regenGraphSTM();\n    }\n\n    //console.log(this.state)\n\n  }\n\n\n  componentWillUnmount = async () => {\n    leave();\n  }\n\n\n  handleClickSTM = async (e) => {\n    this.setState({\n      selectSTM: 1,\n      selectSTL: 0,\n      selectRTL: 0,\n      tripList: [],\n      selectStops: [],\n      plannedTripsWithGraphs: []\n    })\n  }\n\n  handleClickRTL = async (e) => {\n    this.setState({\n      selectSTM: 0,\n      selectSTL: 0,\n      selectRTL: 1,\n      tripList: [],\n      selectStops: [],\n      plannedTripsWithGraphs: []\n    })\n  }\n\n  stopRequestRTL = async (trip) => {\n    const stopsResponseRTL = await getStopsRTL(trip);\n    const parseStopsRTL = stopsResponseRTL.rows[0].jsonb_build_object\n    return parseStopsRTL\n  }\n\n  stopRequestSTM = async (trip) => {\n    const stopsResponseSTM = await getStopsSTM(trip);\n    const parseStopsSTM = stopsResponseSTM.rows[0].jsonb_build_object\n    return parseStopsSTM\n  }\n\n\n\n  regenGraphRTL = async () => {\n\n    let visibleChartTrips = [...this.state.tripList];\n\n    // Get stops info --only if it has not been fetched yet\n    // async/await fetch can't be included in forEach\n    // has to be in for...of\n\n    let stops = [...this.state.selectStops];\n\n    for (const e of visibleChartTrips) {\n      if (stops.filter((f) => { return f.tripID === e }).length === 0) {\n        let tripStops = await this.stopRequestRTL(e);\n        stops.push({\n          tripID: e,\n          tripStops: tripStops\n        });\n      }\n    }\n\n    let plannedTrips = [...this.state.plannedTripsRTL];\n\n    // AutoRemove planned trips that are not in the current time window\n\n    //**TO DO : if trip not in current time window but still online, means\n    //bus is late. Trip should not be autoremoved.\n\n    let visibleChartTripsUpdate = [];\n    const autoRemove = this.state.tripList.length > 0 ?\n      this.state.tripList.forEach((e) => {\n        if (this.state.plannedTripsRTL.filter((f) => {\n          return e === f.tripmin\n        }).length > 0) {\n          visibleChartTripsUpdate.push(e)\n        }\n      }) :\n      '';\n\n    // AutoRemove trips that are not online anymore\n\n    let visibleChartTripsLiveUpdate = [];\n    const autoRemoveLive = visibleChartTripsUpdate.length > 0 ?\n      visibleChartTripsUpdate.forEach((e) => {\n        if (this.state.vehiclesRTL.features.filter((f) => {\n          return f.properties.trip_id === e\n        }).length > 0) {\n          visibleChartTripsLiveUpdate.push(e)\n        }\n      }) :\n      '';\n\n    let vehiclesRTL = this.state.vehiclesRTL;\n    let tracesRTL = this.state.tracesRTL;\n\n    // Calcul des graphs\n    plannedTrips = await calcGraphsTripsRTL(\n      visibleChartTripsLiveUpdate,\n      plannedTrips,\n      stops,\n      vehiclesRTL,\n      tracesRTL\n    );\n\n    this.setState({\n      plannedTripsWithGraphs: plannedTrips,\n      tripList: visibleChartTripsLiveUpdate,\n      selectStops: stops\n    })\n\n  }\n\n\n\n  regenGraphSTM = async () => {\n\n    let visibleChartTrips = [...this.state.tripList];\n\n    // Get stops info --only if it has not been fetched yet\n    // async/await fetch can't be included in forEach\n    // has to be in for...of\n\n    let stops = [...this.state.selectStops];\n\n    for (const e of visibleChartTrips) {\n      if (stops.filter((f) => { return f.tripID === e }).length === 0) {\n        let tripStops = await this.stopRequestSTM(e);\n        stops.push({\n          tripID: e,\n          tripStops: tripStops\n        });\n      }\n    }\n\n    let plannedTrips = [...this.state.plannedTripsSTM];\n\n    // AutoRemove planned trips that are not in the current time window\n\n    //**TO DO : if trip not in current time window but still online, means\n    //bus is late. Trip should not be autoremoved.\n\n    let visibleChartTripsUpdate = [];\n    const autoRemove = this.state.tripList.length > 0 ?\n      this.state.tripList.forEach((e) => {\n        if (this.state.plannedTripsSTM.filter((f) => {\n          return e === f.tripmin\n        }).length > 0) {\n          visibleChartTripsUpdate.push(e)\n        }\n      }) :\n      '';\n\n    // AutoRemove trips that are not online anymore\n\n    let visibleChartTripsLiveUpdate = [];\n    const autoRemoveLive = visibleChartTripsUpdate.length > 0 ?\n      visibleChartTripsUpdate.forEach((e) => {\n        if (this.state.vehiclesSTM.features.filter((f) => {\n          return f.properties.trip_id === e\n        }).length > 0) {\n          visibleChartTripsLiveUpdate.push(e)\n        }\n      }) :\n      '';\n\n    let vehiclesSTM = this.state.vehiclesSTM;\n    let tracesSTM = this.state.tracesSTM;\n\n    // Prepare graphs\n    plannedTrips = await calcGraphsTripsSTM(\n      visibleChartTripsLiveUpdate,\n      plannedTrips,\n      stops,\n      vehiclesSTM,\n      tracesSTM\n    );\n\n    this.setState({\n      plannedTripsWithGraphs: plannedTrips,\n      tripList: visibleChartTripsLiveUpdate,\n      selectStops: stops\n    })\n\n  }\n\n\n  addToTripList = async (e) => {\n    let tripListAdd = [...this.state.tripList];\n    tripListAdd.push(e);\n    this.setState({ tripList: tripListAdd })\n  }\n\n\n  removeFromTripList = async (e) => {\n    let tripListRemove = [...this.state.tripList];\n    let tripPosition = tripListRemove.indexOf(e);\n    tripListRemove.splice(tripPosition, 1)\n\n    let stopListRemove = [...this.state.selectStops];\n    stopListRemove.splice(tripPosition, 1)\n\n    this.setState({\n      tripList: tripListRemove,\n      selectStops: stopListRemove\n    })\n  }\n\n\n  handleTripClickRTL = async (e) => {\n\n    //if trip is online and graph not showing\n    //add trip to list\n\n    //if trip is online and graph showing\n    //remove trip from list\n\n    const showhide = this.state.plannedTripsRTL.filter((f) => {\n      return f.tripmin === e.target.innerHTML\n    })[0].online === 1 &&\n      this.state.tripList.filter((f) => {\n        return f === e.target.innerHTML\n      }).length === 0 ?\n      this.addToTripList(e.target.innerHTML) :\n      this.state.plannedTripsRTL.filter((f) => {\n        return f.tripmin === e.target.innerHTML\n      })[0].online === 1 &&\n        this.state.tripList.filter((f) => {\n          return f === e.target.innerHTML\n        }).length > 0 ?\n        this.removeFromTripList(e.target.innerHTML)\n        : ''\n\n  }\n\n\n  handleTripClickSTM = async (e) => {\n\n    const showhide = this.state.plannedTripsSTM.filter((f) => {\n      return f.tripmin === e.target.innerHTML\n    })[0].online === 1 &&\n      this.state.tripList.filter((f) => {\n        return f === e.target.innerHTML\n      }).length === 0 ?\n      this.addToTripList(e.target.innerHTML) :\n      this.state.plannedTripsSTM.filter((f) => {\n        return f.tripmin === e.target.innerHTML\n      })[0].online === 1 &&\n        this.state.tripList.filter((f) => {\n          return f === e.target.innerHTML\n        }).length > 0 ?\n        this.removeFromTripList(e.target.innerHTML)\n        : ''\n\n  }\n\n\n  render() {\n\n    return (\n      this.state.plannedTripsSTM ?\n        <div className=\"container-fluid\">\n\n          <div className=\"row\">\n            <div className=\"col-sm\">\n              <h2 id=\"title-card\">Vhicule par dpart</h2>\n            </div>\n          </div>\n          <div className=\"row justify-content-center\">\n            <div className=\"col-sm-3 mt-2 mb-2\" style={{ textAlign: \"center\", backgroundColor: \"#E1FFE1\" }}>\n              Voyage planifi actif\n            </div>\n            <div className=\"col-sm-3 mt-2 mb-2\" style={{ textAlign: \"center\", backgroundColor: \"#FFE2E2\" }}>\n              Voyage planifi inactif\n            </div>\n          </div>\n\n          <div className=\"row no-gutters\">\n            <div className=\"col\">\n              <button\n                id=\"agency-card\"\n                type=\"button\" className=\"col btn btn-outline-info\"\n                style={this.state.selectSTM === 1 ?\n                  { backgroundColor: \"#38B2A3\", color: \"#FFFFFF\" } :\n                  { backgroundColor: \"#E9F1F3\", color: \"#000000\" }}\n                onClick={(e) => this.handleClickSTM(e)}>\n                STM\n            </button>\n            </div>\n            <div className=\"col\">\n              <button type=\"button\" className=\"col btn btn-outline-secondary\" disabled>\n                STL\n            </button>\n            </div>\n            <div className=\"col\">\n              <button\n                type=\"button\" className=\"col btn btn-outline-info\"\n                style={this.state.selectRTL === 1 ?\n                  { backgroundColor: \"#38B2A3\", color: \"#FFFFFF\" } :\n                  { backgroundColor: \"#E9F1F3\", color: \"#000000\" }}\n                onClick={(e) => this.handleClickRTL(e)}>\n                RTL\n            </button>\n            </div>\n          </div>\n\n\n          <div className=\"row\">\n            <div className=\"col\">\n              <table id=\"tableOnline\" className=\"table\">\n                <thead>\n                  <tr>\n                    <th style={{ width: \"7.5%\" }}>\n                      Ligne\n                  </th>\n                    <th style={{ width: \"7.5%\" }}>\n                      Direction\n                  </th>\n                    <th style={{ width: \"7.5%\" }}>\n                      Heure de dpart\n                  </th>\n                    <th style={{ width: \"7.5%\" }}>\n                      Heure de fin\n                  </th>\n                    <th style={{ width: \"70%\" }}>\n                      Trip ID\n                  </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {this.state.selectRTL === 1 && this.state.plannedTripsWithGraphs.length > 0 ? this.state.plannedTripsWithGraphs.map((e) => e.graph === undefined ? (\n                    <tr\n                      key={e.keyid}\n                      style={{\n                        backgroundColor: e.online === 1 ? \"#E1FFE1\" : \"#FFE2E2\"\n                      }}>\n                      <td>{e.route_id}</td>\n                      <td>{e.direction_id}</td>\n                      <td>{moment(\"2019-05-10\").startOf('day').seconds(e.timemin).format('H:mm:ss')}</td>\n                      <td>{moment(\"2019-05-10\").startOf('day').seconds(e.timemax).format('H:mm:ss')}</td>\n                      <td\n                        style={{\n                          cursor: e.online === 1 ? 'pointer' : 'default'\n                        }}\n                        onClick={(event) => this.handleTripClickRTL(event)}\n                      >\n                        {e.tripmin}\n                      </td>\n                    </tr>\n                  ) : <tr key={e.keyid}>\n                      <td\n                        colSpan=\"5\"\n                        style={{ backgroundColor: \"#FFFFFF\" }} >\n                        {e.tripmin}\n                      </td>\n                    </tr>) : this.state.selectRTL === 1 && this.state.plannedTripsWithGraphs.length === 0 ?\n                      <tr>\n                        <td colSpan=\"5\" style={{ textAlign: \"center\" }}>\n                          <ReactLoading type={\"bubbles\"} color={\"#277D98\"} height={200} width={100} />\n                        </td>\n                      </tr> :\n                      this.state.selectSTM === 1 && this.state.plannedTripsWithGraphs.length > 0 ? this.state.plannedTripsWithGraphs.map((e) => e.graph === undefined ? (\n                        <tr\n                          key={e.keyid}\n                          style={{\n                            backgroundColor: e.online === 1 ? \"#E1FFE1\" : \"#FFE2E2\"\n                          }}>\n                          <td>{e.route_id}</td>\n                          <td>{e.direction_id}</td>\n                          <td>{moment(\"2019-05-10\").startOf('day').seconds(e.timemin).format('H:mm:ss')}</td>\n                          <td>{moment(\"2019-05-10\").startOf('day').seconds(e.timemax).format('H:mm:ss')}</td>\n                          <td\n                            style={{\n                              cursor: e.online === 1 ? 'pointer' : 'default'\n                            }}\n                            onClick={(event) => this.handleTripClickSTM(event)}\n                          >\n                            {e.tripmin}\n                          </td>\n                        </tr>\n                      ) : <tr key={e.keyid}>\n                          <td\n                            colSpan=\"5\"\n                            style={{ backgroundColor: \"#FFFFFF\" }} >\n                            {e.tripmin}\n                          </td>\n                        </tr>) :\n                        this.state.selectSTM === 1 && this.state.plannedTripsWithGraphs.length === 0 ?\n                          <tr>\n                            <td colSpan=\"4\" style={{ textAlign: \"center\" }}>\n                              <ReactLoading type={\"bubbles\"} color={\"#277D98\"} height={200} width={100} />\n                            </td>\n                          </tr> :\n                          <tr>\n                            <td colSpan=\"5\" style={{ textAlign: \"center\" }}> Slectionner une agence</td>\n                          </tr>}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div >\n        : <div className=\"container\">\n          <div className=\"row justify-content-center\">Chargement en cours...</div>\n          <div className=\"row justify-content-center\">\n            <div><ReactLoading type={\"bars\"} color={\"#277D98\"} height={300} width={175} /></div>\n          </div>\n        </div>\n    )\n  }\n}\n\nexport default Livetrips;","import React, { Component } from 'react';\nimport ReactLoading from 'react-loading';\n\nimport {\n  getNewData, leave,\n  getTracesSTM, getTracesSTL, getTracesRTL,\n  getStopsSTM, getStopsRTL, getStopsSTL\n} from '../API.js';\n\nimport { calcGraphsTripsRTL, longestRoutesRTL } from '../helpers/tripsRoutesRTL.js';\nimport { calcGraphsTripsSTM } from '../helpers/tripsRoutesSTM.js';\n\n\nconst moment = require('moment');\n\nclass Livetrips extends Component {\n\n  state = {\n    tripList: [],\n    selectStops: [],\n    selectSTM: 0,\n    selectSTL: 0,\n    selectRTL: 0,\n  };\n\n  componentDidMount = async () => {\n\n    const getData = getNewData((err, positions) => {\n\n      // Split data by network\n\n      const vehSTM = positions ? positions[0].filter((e) => {\n        return e.reseau === 'STM'\n      }) : ''\n\n      const vehSTL = positions ? positions[0].filter((e) => {\n        return e.reseau === 'STL'\n      }) : ''\n\n      const vehRTL = positions ? positions[0].filter((e) => {\n        return e.reseau === 'RTL'\n      }) : ''\n\n      // Add 'online' property when planned trip matches live data\n      // Allows to color trip with green/red depending on property\n\n      let keyIDRTL = 0;\n      const checkOnlineRTL = positions[1].forEach((e) => {\n        e.keyid = keyIDRTL;\n        keyIDRTL++;\n        if (vehRTL[0].data.features.filter((f) => {\n          return f.properties.trip_id === e.tripmin\n        }).length > 0) {\n          e.online = 1\n        } else {\n          e.online = 0\n        }\n      })\n\n      const completeTracesRTL = longestRoutesRTL(positions[1]);\n\n      // No trip ID in STL data\n      // To Do : find a way to match live trips to planned gtfs data\n\n      let keyIDSTM = 0;\n      const checkOnlineSTM = positions[3].forEach((e) => {\n        e.keyid = keyIDSTM;\n        keyIDSTM++;\n        if (vehSTM[0].data.features.filter((f) => {\n          return f.properties.trip_id === e.tripmin\n        }).length > 0) {\n          e.online = 1\n        } else {\n          e.online = 0\n        }\n      })\n\n\n      this.setState({\n        vehiclesSTM: positions ? vehSTM[0].data : '',\n        vehiclesSTL: positions ? vehSTL[0].data : '',\n        vehiclesRTL: positions ? vehRTL[0].data : '',\n        timestampSTM: positions ? vehSTM[0].time : '',\n        timestampSTL: positions ? vehSTL[0].time : '',\n        timestampRTL: positions ? vehSTL[0].time : '',\n        plannedTripsRTL: positions ? positions[1] : '',\n        plannedTripsSTL: positions ? positions[2].sort((a, b) => (a.timemin > b.timemin) ? 1 : -1) : '',\n        plannedTripsSTM: positions ? positions[3] : ''\n      })\n\n      //plannedTripsRTL: positions ? positions[1].sort((a, b) => (a.timemin > b.timemin) ? 1 : -1) : ''\n\n    })\n\n\n    const tracesRTL = await getTracesRTL();\n    const tracesSTM = await getTracesSTM();\n\n    this.setState({\n      tracesRTL: tracesRTL.rows[0].jsonb_build_object,\n      tracesSTM: tracesSTM.rows[0].jsonb_build_object\n    })\n\n\n    if (this.state.selectRTL === 1 && this.state.plannedTripsRTL) {\n      this.regenGraphRTL();\n    }\n\n    if (this.state.selectSTM === 1 && this.state.plannedTripsSTM) {\n      this.regenGraphSTM();\n    }\n\n  }\n\n\n  componentDidUpdate(prevProps, prevState) {\n\n    const { tripList, plannedTripsRTL, plannedTripsSTM, selectRTL, selectSTM } = this.state;\n\n\n    if (selectRTL === 1 && plannedTripsRTL !== prevState.plannedTripsRTL) {\n      this.regenGraphRTL();\n    }\n\n    if (selectRTL === 1 && tripList.length !== prevState.tripList.length) {\n      this.regenGraphRTL();\n    }\n\n\n    if (selectSTM === 1 && plannedTripsSTM !== prevState.plannedTripsSTM) {\n      this.regenGraphSTM();\n    }\n\n    if (selectSTM === 1 && tripList.length !== prevState.tripList.length) {\n      this.regenGraphSTM();\n    }\n\n    //console.log(this.state)\n\n  }\n\n\n  componentWillUnmount = async () => {\n    leave();\n  }\n\n\n  handleClickSTM = async (e) => {\n    this.setState({\n      selectSTM: 1,\n      selectSTL: 0,\n      selectRTL: 0,\n      tripList: [],\n      selectStops: [],\n      plannedTripsWithGraphs: []\n    })\n  }\n\n  handleClickRTL = async (e) => {\n    this.setState({\n      selectSTM: 0,\n      selectSTL: 0,\n      selectRTL: 1,\n      tripList: [],\n      selectStops: [],\n      plannedTripsWithGraphs: []\n    })\n  }\n\n  stopRequestRTL = async (trip) => {\n    const stopsResponseRTL = await getStopsRTL(trip);\n    const parseStopsRTL = stopsResponseRTL.rows[0].jsonb_build_object\n    return parseStopsRTL\n  }\n\n  stopRequestSTM = async (trip) => {\n    const stopsResponseSTM = await getStopsSTM(trip);\n    const parseStopsSTM = stopsResponseSTM.rows[0].jsonb_build_object\n    return parseStopsSTM\n  }\n\n\n\n  regenGraphRTL = async () => {\n\n    let visibleChartTrips = [...this.state.tripList];\n\n    // Get stops info --only if it has not been fetched yet\n    // async/await fetch can't be included in forEach\n    // has to be in for...of\n\n    let stops = [...this.state.selectStops];\n\n    for (const e of visibleChartTrips) {\n      if (stops.filter((f) => { return f.tripID === e }).length === 0) {\n        let tripStops = await this.stopRequestRTL(e);\n        stops.push({\n          tripID: e,\n          tripStops: tripStops\n        });\n      }\n    }\n\n    let plannedTrips = [...this.state.plannedTripsRTL];\n\n    // AutoRemove planned trips that are not in the current time window\n\n    //**TO DO : if trip not in current time window but still online, means\n    //bus is late. Trip should not be autoremoved.\n\n    let visibleChartTripsUpdate = [];\n    const autoRemove = this.state.tripList.length > 0 ?\n      this.state.tripList.forEach((e) => {\n        if (this.state.plannedTripsRTL.filter((f) => {\n          return e === f.tripmin\n        }).length > 0) {\n          visibleChartTripsUpdate.push(e)\n        }\n      }) :\n      '';\n\n    // AutoRemove trips that are not online anymore\n\n    let visibleChartTripsLiveUpdate = [];\n    const autoRemoveLive = visibleChartTripsUpdate.length > 0 ?\n      visibleChartTripsUpdate.forEach((e) => {\n        if (this.state.vehiclesRTL.features.filter((f) => {\n          return f.properties.trip_id === e\n        }).length > 0) {\n          visibleChartTripsLiveUpdate.push(e)\n        }\n      }) :\n      '';\n\n    let vehiclesRTL = this.state.vehiclesRTL;\n    let tracesRTL = this.state.tracesRTL;\n\n    // Calcul des graphs\n    plannedTrips = await calcGraphsTripsRTL(\n      visibleChartTripsLiveUpdate,\n      plannedTrips,\n      stops,\n      vehiclesRTL,\n      tracesRTL\n    );\n\n    this.setState({\n      plannedTripsWithGraphs: plannedTrips,\n      tripList: visibleChartTripsLiveUpdate,\n      selectStops: stops\n    })\n\n  }\n\n\n\n  regenGraphSTM = async () => {\n\n    let visibleChartTrips = [...this.state.tripList];\n\n    // Get stops info --only if it has not been fetched yet\n    // async/await fetch can't be included in forEach\n    // has to be in for...of\n\n    let stops = [...this.state.selectStops];\n\n    for (const e of visibleChartTrips) {\n      if (stops.filter((f) => { return f.tripID === e }).length === 0) {\n        let tripStops = await this.stopRequestSTM(e);\n        stops.push({\n          tripID: e,\n          tripStops: tripStops\n        });\n      }\n    }\n\n    let plannedTrips = [...this.state.plannedTripsSTM];\n\n    // AutoRemove planned trips that are not in the current time window\n\n    //**TO DO : if trip not in current time window but still online, means\n    //bus is late. Trip should not be autoremoved.\n\n    let visibleChartTripsUpdate = [];\n    const autoRemove = this.state.tripList.length > 0 ?\n      this.state.tripList.forEach((e) => {\n        if (this.state.plannedTripsSTM.filter((f) => {\n          return e === f.tripmin\n        }).length > 0) {\n          visibleChartTripsUpdate.push(e)\n        }\n      }) :\n      '';\n\n    // AutoRemove trips that are not online anymore\n\n    let visibleChartTripsLiveUpdate = [];\n    const autoRemoveLive = visibleChartTripsUpdate.length > 0 ?\n      visibleChartTripsUpdate.forEach((e) => {\n        if (this.state.vehiclesSTM.features.filter((f) => {\n          return f.properties.trip_id === e\n        }).length > 0) {\n          visibleChartTripsLiveUpdate.push(e)\n        }\n      }) :\n      '';\n\n    let vehiclesSTM = this.state.vehiclesSTM;\n    let tracesSTM = this.state.tracesSTM;\n\n    // Prepare graphs\n    plannedTrips = await calcGraphsTripsSTM(\n      visibleChartTripsLiveUpdate,\n      plannedTrips,\n      stops,\n      vehiclesSTM,\n      tracesSTM\n    );\n\n    this.setState({\n      plannedTripsWithGraphs: plannedTrips,\n      tripList: visibleChartTripsLiveUpdate,\n      selectStops: stops\n    })\n\n  }\n\n\n  addToTripList = async (e) => {\n    let tripListAdd = [...this.state.tripList];\n    tripListAdd.push(e);\n    this.setState({ tripList: tripListAdd })\n  }\n\n\n  removeFromTripList = async (e) => {\n    let tripListRemove = [...this.state.tripList];\n    let tripPosition = tripListRemove.indexOf(e);\n    tripListRemove.splice(tripPosition, 1)\n\n    let stopListRemove = [...this.state.selectStops];\n    stopListRemove.splice(tripPosition, 1)\n\n    this.setState({\n      tripList: tripListRemove,\n      selectStops: stopListRemove\n    })\n  }\n\n\n  handleTripClickRTL = async (e) => {\n\n    //if trip is online and graph not showing\n    //add trip to list\n\n    //if trip is online and graph showing\n    //remove trip from list\n\n    const showhide = this.state.plannedTripsRTL.filter((f) => {\n      return f.tripmin === e.target.innerHTML\n    })[0].online === 1 &&\n      this.state.tripList.filter((f) => {\n        return f === e.target.innerHTML\n      }).length === 0 ?\n      this.addToTripList(e.target.innerHTML) :\n      this.state.plannedTripsRTL.filter((f) => {\n        return f.tripmin === e.target.innerHTML\n      })[0].online === 1 &&\n        this.state.tripList.filter((f) => {\n          return f === e.target.innerHTML\n        }).length > 0 ?\n        this.removeFromTripList(e.target.innerHTML)\n        : ''\n\n  }\n\n\n  handleTripClickSTM = async (e) => {\n\n    const showhide = this.state.plannedTripsSTM.filter((f) => {\n      return f.tripmin === e.target.innerHTML\n    })[0].online === 1 &&\n      this.state.tripList.filter((f) => {\n        return f === e.target.innerHTML\n      }).length === 0 ?\n      this.addToTripList(e.target.innerHTML) :\n      this.state.plannedTripsSTM.filter((f) => {\n        return f.tripmin === e.target.innerHTML\n      })[0].online === 1 &&\n        this.state.tripList.filter((f) => {\n          return f === e.target.innerHTML\n        }).length > 0 ?\n        this.removeFromTripList(e.target.innerHTML)\n        : ''\n\n  }\n\n\n  render() {\n\n    return (\n      this.state.plannedTripsSTM ?\n        <div className=\"container-fluid\">\n\n          <div className=\"row\">\n            <div className=\"col-sm\">\n              <h2 id=\"title-card\">Vhicule par dpart</h2>\n            </div>\n          </div>\n          <div className=\"row justify-content-center\">\n            <div className=\"col-sm-3 mt-2 mb-2\" style={{ textAlign: \"center\", backgroundColor: \"#E1FFE1\" }}>\n              Voyage planifi actif\n            </div>\n            <div className=\"col-sm-3 mt-2 mb-2\" style={{ textAlign: \"center\", backgroundColor: \"#FFE2E2\" }}>\n              Voyage planifi inactif\n            </div>\n          </div>\n\n          <div className=\"row no-gutters\">\n            <div className=\"col\">\n              <button\n                id=\"agency-card\"\n                type=\"button\" className=\"col btn btn-outline-info\"\n                style={this.state.selectSTM === 1 ?\n                  { backgroundColor: \"#38B2A3\", color: \"#FFFFFF\" } :\n                  { backgroundColor: \"#E9F1F3\", color: \"#000000\" }}\n                onClick={(e) => this.handleClickSTM(e)}>\n                STM\n            </button>\n            </div>\n            <div className=\"col\">\n              <button type=\"button\" className=\"col btn btn-outline-secondary\" disabled>\n                STL\n            </button>\n            </div>\n            <div className=\"col\">\n              <button\n                type=\"button\" className=\"col btn btn-outline-info\"\n                style={this.state.selectRTL === 1 ?\n                  { backgroundColor: \"#38B2A3\", color: \"#FFFFFF\" } :\n                  { backgroundColor: \"#E9F1F3\", color: \"#000000\" }}\n                onClick={(e) => this.handleClickRTL(e)}>\n                RTL\n            </button>\n            </div>\n          </div>\n\n\n          <div className=\"row\">\n            <div className=\"col\">\n              <table id=\"tableOnline\" className=\"table\">\n                <thead>\n                  <tr>\n                    <th style={{ width: \"7.5%\" }}>\n                      Ligne\n                  </th>\n                    <th style={{ width: \"7.5%\" }}>\n                      Direction\n                  </th>\n                    <th style={{ width: \"7.5%\" }}>\n                      Heure de dpart\n                  </th>\n                    <th style={{ width: \"7.5%\" }}>\n                      Heure de fin\n                  </th>\n                    <th style={{ width: \"70%\" }}>\n                      Trip ID\n                  </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {this.state.selectRTL === 1 && this.state.plannedTripsWithGraphs.length > 0 ? this.state.plannedTripsWithGraphs.map((e) => e.graph === undefined ? (\n                    <tr\n                      key={e.keyid}\n                      style={{\n                        backgroundColor: e.online === 1 ? \"#E1FFE1\" : \"#FFE2E2\"\n                      }}>\n                      <td>{e.route_id}</td>\n                      <td>{e.direction_id}</td>\n                      <td>{moment(\"2019-05-10\").startOf('day').seconds(e.timemin).format('H:mm:ss')}</td>\n                      <td>{moment(\"2019-05-10\").startOf('day').seconds(e.timemax).format('H:mm:ss')}</td>\n                      <td\n                        style={{\n                          cursor: e.online === 1 ? 'pointer' : 'default'\n                        }}\n                        onClick={(event) => this.handleTripClickRTL(event)}\n                      >\n                        {e.tripmin}\n                      </td>\n                    </tr>\n                  ) : <tr key={e.keyid}>\n                      <td\n                        colSpan=\"5\"\n                        style={{ backgroundColor: \"#FFFFFF\" }} >\n                        {e.tripmin}\n                      </td>\n                    </tr>) : this.state.selectRTL === 1 && this.state.plannedTripsWithGraphs.length === 0 ?\n                      <tr>\n                        <td colSpan=\"5\" style={{ textAlign: \"center\" }}>\n                          <ReactLoading type={\"bubbles\"} color={\"#277D98\"} height={200} width={100} />\n                        </td>\n                      </tr> :\n                      this.state.selectSTM === 1 && this.state.plannedTripsWithGraphs.length > 0 ? this.state.plannedTripsWithGraphs.map((e) => e.graph === undefined ? (\n                        <tr\n                          key={e.keyid}\n                          style={{\n                            backgroundColor: e.online === 1 ? \"#E1FFE1\" : \"#FFE2E2\"\n                          }}>\n                          <td>{e.route_id}</td>\n                          <td>{e.direction_id}</td>\n                          <td>{moment(\"2019-05-10\").startOf('day').seconds(e.timemin).format('H:mm:ss')}</td>\n                          <td>{moment(\"2019-05-10\").startOf('day').seconds(e.timemax).format('H:mm:ss')}</td>\n                          <td\n                            style={{\n                              cursor: e.online === 1 ? 'pointer' : 'default'\n                            }}\n                            onClick={(event) => this.handleTripClickSTM(event)}\n                          >\n                            {e.tripmin}\n                          </td>\n                        </tr>\n                      ) : <tr key={e.keyid}>\n                          <td\n                            colSpan=\"5\"\n                            style={{ backgroundColor: \"#FFFFFF\" }} >\n                            {e.tripmin}\n                          </td>\n                        </tr>) :\n                        this.state.selectSTM === 1 && this.state.plannedTripsWithGraphs.length === 0 ?\n                          <tr>\n                            <td colSpan=\"4\" style={{ textAlign: \"center\" }}>\n                              <ReactLoading type={\"bubbles\"} color={\"#277D98\"} height={200} width={100} />\n                            </td>\n                          </tr> :\n                          <tr>\n                            <td colSpan=\"5\" style={{ textAlign: \"center\" }}> Slectionner une agence</td>\n                          </tr>}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div >\n        : <div className=\"container\">\n          <div className=\"row justify-content-center\">Chargement en cours...</div>\n          <div className=\"row justify-content-center\">\n            <div><ReactLoading type={\"bars\"} color={\"#277D98\"} height={300} width={175} /></div>\n          </div>\n        </div>\n    )\n  }\n}\n\nexport default Livetrips;","import React, { Component } from 'react';\nimport { getHistory } from '../API';\nimport {\n  ResponsiveContainer,\n  ScatterChart,\n  Scatter,\n  XAxis,\n  YAxis,\n  ZAxis,\n  Tooltip,\n  Legend\n} from 'recharts';\n\nimport ReactLoading from 'react-loading';\n\nconst moment = require('moment');\n\nclass Historique extends Component {\n\n  state = {\n    history: null\n  };\n\n  componentDidMount = async () => {\n\n    const allVehicles = await getHistory()\n\n    const parseAll = [];\n\n    // Modifier le format de hh:mm:ss  unix milliseconds\n    // C'est le format privilgi par Recharts pour les units de temps\n\n    const parsing = allVehicles ?\n      allVehicles.forEach((e) => {\n        parseAll.push({\n          reseau: e.reseau,\n          time: parseInt(moment(\"2019-04-28 \" + e.timestr).format('x')),\n          vehlen: e.vehlen,\n          weekday: e.weekday,\n          date: moment(e.timestamp).format('YYYY-MM-DD')\n        })\n      }) : ''\n\n    // Sparation des donnes de semaine, samedi, dimanche\n\n    const week = parseAll.filter((e) => {\n      return parseInt(e.weekday) > 0 && parseInt(e.weekday) < 6\n    })\n\n    const saturday = parseAll.filter((e) => {\n      return parseInt(e.weekday) === 6\n    })\n\n    const sunday = parseAll.filter((e) => {\n      return parseInt(e.weekday) === 0\n    })\n\n    this.setState({\n      week: week,\n      saturday: saturday,\n      sunday: sunday\n    })\n\n    //console.log(this.state)\n\n\n  }\n\n\n  render() {\n\n    const CustomTooltip = ({ active, payload }) => {\n      if (active) {\n        return (\n          <div className=\"custom-tooltip\">\n            <p className=\"label\">Rseau : {payload[0].payload.reseau}<br />\n              Date : {payload[0].payload.date} <br />\n              Heure : {moment(payload[0].payload.time).format('HH:mm:ss')}<br />\n              Vhicules : {payload[0].payload.vehlen}</p>\n          </div>\n        );\n      }\n\n      return null;\n    };\n\n    return this.state.sunday ? (\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-sm\">\n            <h2 id=\"title-card\">Historique des 3 derniers jours de service</h2>\n          </div>\n        </div>\n        <br />\n\n        <div id=\"chartCard\">\n          <h4 style={{ color: '#000000', textAlign: 'center' }}>Semaine</h4>\n          <ResponsiveContainer width=\"100%\" height={350}>\n            <ScatterChart width={730} height={250}\n              margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n              <XAxis\n                type=\"number\"\n                dataKey=\"time\"\n                name='time'\n                domain={[1556420760000, 1556495999000]}\n                tickFormatter={(unixTime) => moment(unixTime).format('HH:mm:ss')}\n                ticks={[\n                  1556424000100,\n                  1556427600000, 1556431200000, 1556434800000, 1556438400000,\n                  1556442000000, 1556445600000, 1556449200000, 1556452800000,\n                  1556456400000, 1556460000000, 1556463600000, 1556467200000,\n                  1556470800000, 1556474400000, 1556478000000, 1556481600000,\n                  1556485200000, 1556488800000, 1556492400000, 1556496000000,\n                  1556499600000, 1556503200000, 1556506800000, 1556510399900\n                ]}\n              />\n              <YAxis yAxisId=\"left\" dataKey=\"vehlen\" name='vhicules'\n                label={{ value: 'STM', angle: -90, position: 'insideLeft' }} />\n              <YAxis yAxisId=\"right\" orientation=\"right\" dataKey=\"vehlen\" name='vhicules'\n                label={{ value: 'STL, RTL', angle: -90, position: 'right' }} />\n              <ZAxis dataKey=\"z\" range={[10]} />\n              <Tooltip\n                content={<CustomTooltip />}\n              />\n              <Legend />\n              <Scatter yAxisId=\"left\" name=\"STM\" data={this.state.week.filter((e) => { return e.reseau === 'STM' })} fill=\"#009DE0\" />\n              <Scatter yAxisId=\"right\" name=\"STL\" data={this.state.week.filter((e) => { return e.reseau === 'STL' })} fill=\"#82C341\" />\n              <Scatter yAxisId=\"right\" name=\"RTL\" data={this.state.week.filter((e) => { return e.reseau === 'RTL' })} fill=\"#A93332\" />\n            </ScatterChart>\n          </ResponsiveContainer>\n        </div >\n\n\n        <div id=\"chartCard\">\n          <h4 style={{ color: '#000000', textAlign: 'center' }}>Samedi</h4>\n          <ResponsiveContainer width=\"100%\" height={350}>\n            <ScatterChart width={730} height={250}\n              margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n              <XAxis\n                type=\"number\"\n                dataKey=\"time\"\n                name='time'\n                domain={[1556420760000, 1556495999000]}\n                tickFormatter={(unixTime) => moment(unixTime).format('HH:mm:ss')}\n                ticks={[\n                  1556424000100,\n                  1556427600000, 1556431200000, 1556434800000, 1556438400000,\n                  1556442000000, 1556445600000, 1556449200000, 1556452800000,\n                  1556456400000, 1556460000000, 1556463600000, 1556467200000,\n                  1556470800000, 1556474400000, 1556478000000, 1556481600000,\n                  1556485200000, 1556488800000, 1556492400000, 1556496000000,\n                  1556499600000, 1556503200000, 1556506800000, 1556510399900\n                ]} />\n              <YAxis yAxisId=\"left\" dataKey=\"vehlen\" name='vhicules'\n                label={{ value: 'STM', angle: -90, position: 'insideLeft' }} />\n              <YAxis yAxisId=\"right\" orientation=\"right\" dataKey=\"vehlen\" name='vhicules'\n                label={{ value: 'STL, RTL', angle: -90, position: 'right' }} />\n              <ZAxis dataKey=\"z\" range={[10]} />\n              <Tooltip\n                content={<CustomTooltip />}\n              />\n              <Legend />\n              <Scatter yAxisId=\"left\" name=\"STM\" data={this.state.saturday.filter((e) => { return e.reseau === 'STM' })} fill=\"#009DE0\" />\n              <Scatter yAxisId=\"right\" name=\"STL\" data={this.state.saturday.filter((e) => { return e.reseau === 'STL' })} fill=\"#82C341\" />\n              <Scatter yAxisId=\"right\" name=\"RTL\" data={this.state.saturday.filter((e) => { return e.reseau === 'RTL' })} fill=\"#A93332\" />\n            </ScatterChart>\n          </ResponsiveContainer>\n        </div >\n\n        <div id=\"chartCard\">\n          <h4 style={{ color: '#000000', textAlign: 'center' }}>Dimanche</h4>\n          <ResponsiveContainer width=\"100%\" height={350}>\n            <ScatterChart width={500} height={250}\n              margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n              <XAxis\n                type=\"number\"\n                dataKey=\"time\"\n                name='time'\n                domain={[1556420760000, 1556495999000]}\n                tickFormatter={(unixTime) => moment(unixTime).format('HH:mm:ss')}\n                ticks={[\n                  1556424000100,\n                  1556427600000, 1556431200000, 1556434800000, 1556438400000,\n                  1556442000000, 1556445600000, 1556449200000, 1556452800000,\n                  1556456400000, 1556460000000, 1556463600000, 1556467200000,\n                  1556470800000, 1556474400000, 1556478000000, 1556481600000,\n                  1556485200000, 1556488800000, 1556492400000, 1556496000000,\n                  1556499600000, 1556503200000, 1556506800000, 1556510399900\n                ]} />\n              <YAxis yAxisId=\"left\" dataKey=\"vehlen\" name='vhicules'\n                label={{ value: 'STM', angle: -90, position: 'insideLeft' }} />\n              <YAxis yAxisId=\"right\" orientation=\"right\" dataKey=\"vehlen\" name='vhicules'\n                label={{ value: 'STL, RTL', angle: -90, position: 'right' }} />\n              <ZAxis dataKey=\"z\" range={[10]} />\n              <Tooltip\n                content={<CustomTooltip />}\n              />\n              <Legend />\n              <Scatter yAxisId=\"left\" name=\"STM\" data={this.state.sunday.filter((e) => { return e.reseau === 'STM' })} fill=\"#009DE0\" />\n              <Scatter yAxisId=\"right\" name=\"STL\" data={this.state.sunday.filter((e) => { return e.reseau === 'STL' })} fill=\"#82C341\" />\n              <Scatter yAxisId=\"right\" name=\"RTL\" data={this.state.sunday.filter((e) => { return e.reseau === 'RTL' })} fill=\"#A93332\" />\n            </ScatterChart>\n          </ResponsiveContainer>\n        </div >\n\n\n        <br />\n      </div>\n    ) : <div className=\"container\">\n        <div className=\"row justify-content-center\">Chargement en cours...</div>\n        <div className=\"row justify-content-center\">\n          <div><ReactLoading type={\"bars\"} color={\"#277D98\"} height={300} width={175} /></div>\n        </div>\n      </div >\n  }\n}\n\nexport default Historique;\n\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport NotFound from './NotFound';\n\nimport Livemap from '../containers/Livemap';\nimport Livetrips from '../containers/Livetrips';\nimport Liveroutes from '../containers/Liveroutes';\nimport Historique from '../containers/Historique';\n\n\n\nconst Routes = () => (\n  <Switch>\n    <Route exact path=\"/\" component={Livemap} />\n    <Route exact path=\"/historique\" component={Historique} />\n    <Route exact path=\"/livetrips\" component={Livetrips} />\n    <Route exact path=\"/liveroutes\" component={Liveroutes} />\n    <Route path=\"*\" component={NotFound} />\n  </Switch>\n);\n\nexport default Routes;\n","import React, { Component } from 'react';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Routes from './components/Routes';\nimport './App.css';\n\nclass App extends Component {\n  render() {\n    return (\n      <React.Fragment>\n        <Header />\n        <main id=\"app\">\n          <Routes />\n        </main>\n        <Footer />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>, document.getElementById('root'));\n"],"sourceRoot":""}